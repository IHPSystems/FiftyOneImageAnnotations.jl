include:
  - project: ihp/julia/julia-gitlab-ci-templates
    ref: v1.5.0
    file: /templates.gitlab-ci.yaml
  - project: ihp/julia/julia-gitlab-ci-templates
    ref: v1.5.0
    file: /jobs/analyze_package.gitlab-ci.yaml
  - project: ihp/julia/julia-gitlab-ci-templates
    ref: v1.5.0
    file: /jobs/analyze_tests.gitlab-ci.yaml
  - project: ihp/julia/julia-gitlab-ci-templates
    ref: v1.5.0
    file: /jobs/format.gitlab-ci.yaml

analyze_package:
  variables:
    CI_JULIA_JET_TARGET_DEFINED_MODULES: "true"
    CI_JULIA_VERSION: "1-bullseye"

analyze_tests:
  variables:
    CI_JULIA_JET_TARGET_DEFINED_MODULES: "true"
    CI_JULIA_VERSION: "1-bullseye"

test:
  stage: test
  parallel:
    matrix:
      - CI_JULIA_VERSION: ["1.6-bullseye", "1-bullseye"]
  extends:
    - .julia.setup
    - .julia.test
